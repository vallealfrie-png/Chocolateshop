<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chocolate Shop Auth</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            chocolate: '#4E342E',
            cocoa: '#3E2723'
          }
        }
      }
    }
  </script>
</head>

<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-cocoa via-chocolate to-black">

  <!-- Blur blobs -->
  <div class="absolute w-72 h-72 bg-amber-500 rounded-full blur-3xl opacity-20 top-10 left-10"></div>
  <div class="absolute w-72 h-72 bg-orange-700 rounded-full blur-3xl opacity-20 bottom-10 right-10"></div>

  <!-- Card -->
  <div class="relative w-full max-w-md p-8 rounded-2xl
              bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl">

    <h1 class="text-3xl font-bold text-center text-white mb-2">
      üç´ Chocolate Shop
    </h1>
    <p class="text-center text-white/70 mb-6">
      Login or Create Account
    </p>

    <!-- Email Auth -->
    <form id="authForm" class="space-y-4">
      <input id="email" type="email" placeholder="Email" required
        class="w-full px-4 py-3 rounded-xl bg-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-amber-500"/>

      <input id="password" type="password" placeholder="Password" required
        class="w-full px-4 py-3 rounded-xl bg-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-amber-500"/>

      <button id="loginBtn" type="button"
        class="w-full py-3 rounded-xl bg-amber-600 hover:bg-amber-700 transition font-semibold">
        Login
      </button>

      <button id="signupBtn" type="button"
        class="w-full py-3 rounded-xl bg-amber-500 hover:bg-amber-600 transition font-semibold">
        Sign Up
      </button>
    </form>

    <!-- OAuth -->
    <div class="mt-6 space-y-3">
      <button id="googleBtn"
        class="w-full py-3 bg-white text-black rounded-xl font-semibold hover:bg-gray-200">
        Continue with Google
      </button>

      <button id="facebookBtn"
        class="w-full py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700">
        Continue with Facebook
      </button>
    </div>

    <p id="message" class="text-center text-sm mt-4 text-red-400"></p>
  </div>

  <!-- AUTH SCRIPT -->
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

    const supabase = createClient(
      'https://ljnympazqtjzyytnxouu.supabase.co',
      'sb_publishable__dsXi17HgDK0pXh24-hEaA_4kc7o79r'
    )

    const email = document.getElementById('email')
    const password = document.getElementById('password')
    const message = document.getElementById('message')

    document.getElementById('loginBtn').onclick = async () => {
      message.textContent = 'Logging in...'
      const { error } = await supabase.auth.signInWithPassword({
        email: email.value,
        password: password.value
      })
      handleResult(error)
    }

    document.getElementById('signupBtn').onclick = async () => {
      message.textContent = 'Creating account...'
      const { error } = await supabase.auth.signUp({
        email: email.value,
        password: password.value
      })
      handleResult(error)
    }

    document.getElementById('googleBtn').onclick = async () => {
      await supabase.auth.signInWithOAuth({
        provider: 'google',
        options: { redirectTo: window.location.origin }
      })
    }

    document.getElementById('facebookBtn').onclick = async () => {
      await supabase.auth.signInWithOAuth({
        provider: 'facebook',
        options: { redirectTo: window.location.origin }
      })
    }

    function handleResult(error) {
      if (error) {
        message.textContent = error.message
      } else {
        message.textContent = 'Success üéâ Redirecting...'
        message.classList.remove('text-red-400')
        message.classList.add('text-green-400')
        setTimeout(() => {
          window.location.href = 'dashboard.html'
        }, 1000)
      }
    }
  </script>

</body>
</html>

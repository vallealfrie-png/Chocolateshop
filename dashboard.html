<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chocolate Shop POS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            chocolate: '#4E342E',
            cocoa: '#3E2723'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gradient-to-br from-cocoa via-chocolate to-black min-h-screen text-white">

  <!-- HEADER -->
  <header class="flex justify-between items-center px-6 py-4 bg-white/10 backdrop-blur border-b border-white/20">
    <h1 class="text-2xl font-bold">üç´ Chocolate POS</h1>
    <button id="logoutBtn"
      class="px-4 py-2 bg-red-600 rounded-lg hover:bg-red-700 transition">
      Logout
    </button>
  </header>

  <!-- MAIN -->
  <main class="grid grid-cols-1 lg:grid-cols-3 gap-6 p-6">

    <!-- PRODUCTS -->
    <section class="lg:col-span-2 bg-white/10 backdrop-blur rounded-2xl p-4 border border-white/20">
      <h2 class="text-xl font-semibold mb-4">Products</h2>

      <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        <button onclick="addToCart('Dark Chocolate',120)"
          class="bg-white/20 rounded-xl p-4 hover:bg-white/30 transition">
          <h3 class="font-bold">üç´ Dark Chocolate</h3>
          <p class="text-sm opacity-70">‚Ç±120</p>
        </button>

        <button onclick="addToCart('Milk Chocolate',100)"
          class="bg-white/20 rounded-xl p-4 hover:bg-white/30 transition">
          <h3 class="font-bold">üç´ Milk Chocolate</h3>
          <p class="text-sm opacity-70">‚Ç±100</p>
        </button>

        <button onclick="addToCart('Hot Cocoa',90)"
          class="bg-white/20 rounded-xl p-4 hover:bg-white/30 transition">
          <h3 class="font-bold">‚òï Hot Cocoa</h3>
          <p class="text-sm opacity-70">‚Ç±90</p>
        </button>
      </div>
    </section>

    <!-- CART -->
    <section class="bg-white/10 backdrop-blur rounded-2xl p-4 border border-white/20">
      <h2 class="text-xl font-semibold mb-4">Cart</h2>

      <ul id="cartList" class="space-y-2"></ul>

      <div class="border-t border-white/20 mt-4 pt-4">
        <p class="flex justify-between font-bold">
          <span>Total</span>
          <span>‚Ç±<span id="total">0</span></span>
        </p>

        <button
          class="w-full mt-4 py-3 bg-amber-600 rounded-xl hover:bg-amber-700 transition">
          Checkout
        </button>
      </div>
    </section>

  </main>

  <!-- SUPABASE + POS LOGIC -->
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

    // üî¥ REPLACE THESE
    const SUPABASE_URL = 'https://ljnympazqtjzyytnxouu.supabase.co'
    const SUPABASE_ANON_KEY = 'sb_publishable__dsXi17HgDK0pXh24-hEaA_4kc7o79r'

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

    // üîê AUTH GUARD
    const { data: { session } } = await supabase.auth.getSession()
    if (!session) {
      window.location.href = 'index.html'
    }

    // üö™ LOGOUT
    document.getElementById('logoutBtn').onclick = async () => {
      await supabase.auth.signOut()
      window.location.href = 'index.html'
    }

    // üõí POS LOGIC
    let cart = []
    let total = 0

    window.addToCart = (name, price) => {
      cart.push({ name, price })
      total += price
      renderCart()
    }

    function renderCart() {
      const list = document.getElementById('cartList')
      const totalEl = document.getElementById('total')

      list.innerHTML = ''

      cart.forEach(item => {
        const li = document.createElement('li')
        li.className = 'flex justify-between bg-white/20 p-2 rounded-lg'
        li.innerHTML = `<span>${item.name}</span><span>‚Ç±${item.price}</span>`
        list.appendChild(li)
      })

      totalEl.textContent = total
    }
  </script>

</body>
</html>
